const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-pdf-3WSohUOQ.js","assets/vendor-dQHSHOEt.js","assets/FeelingPage-BNt5yKAT.js","assets/vendor-react-B34eQvAi.js","assets/vendor-framer-motion-cuc11a3j.js"])))=>i.map(i=>d[i]);
import{r as i,j as e,U as T,H as I,R as _,a as P}from"./vendor-react-B34eQvAi.js";import{_ as w}from"./vendor-pdf-3WSohUOQ.js";import{$ as S}from"./vendor-dQHSHOEt.js";import{X as A}from"./vendor-dexie-BzTPWI4a.js";import{m as N}from"./vendor-framer-motion-cuc11a3j.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function p(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=p(t);fetch(t.href,s)}})();function O({onStart:a,initial:r,visible:p=!0}){const[o,t]=i.useState(r?.fontSize??16),[s,d]=i.useState(r?.highContrast??!1),[g,j]=i.useState(r?.tts??!1);return e.jsx("div",{className:"device-center",children:e.jsx("div",{className:"device",style:{fontSize:o,fontFamily:"Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial",background:"var(--card)",borderRadius:"var(--rounded-device)",boxShadow:"0 10px 32px rgba(16,24,40,0.12)"},children:e.jsxs("div",{className:"journal-card",style:{borderRadius:20,boxShadow:"0 6px 24px rgba(16,24,40,0.10)",padding:"2.5rem 2rem",maxWidth:380,margin:"0 auto"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:700,margin:0,letterSpacing:"-0.5px",fontFamily:"inherit"},children:"Welcome to Kindred Echo"}),e.jsx("p",{className:"muted",style:{marginTop:10,fontSize:"1.1rem",fontWeight:500,letterSpacing:"-0.1px"},children:"Your space to reflect and connect"}),e.jsxs("div",{style:{marginTop:28,display:"grid",gap:18},children:[e.jsxs("label",{style:{display:"block",marginBottom:0},children:[e.jsx("div",{style:{marginBottom:8,fontWeight:500},children:"Font size"}),e.jsx("input",{type:"range",min:14,max:24,value:o,onChange:h=>t(Number(h.target.value)),style:{width:"100%",accentColor:"var(--accent)",height:4,borderRadius:8}})]}),e.jsxs("label",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,padding:"6px 0"},children:[e.jsx("span",{style:{fontWeight:500},children:"High contrast"}),e.jsx("input",{type:"checkbox",checked:s,onChange:h=>d(h.target.checked),style:{width:20,height:20,accentColor:"var(--accent)"}})]}),e.jsxs("label",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,padding:"6px 0"},children:[e.jsx("span",{style:{fontWeight:500},children:"Text-to-speech"}),e.jsx("input",{type:"checkbox",checked:g,onChange:h=>j(h.target.checked),style:{width:20,height:20,accentColor:"var(--accent-2)"}})]})]}),e.jsx("div",{style:{marginTop:32,textAlign:"center"},children:e.jsx("button",{onClick:()=>a({fontSize:o,highContrast:s,tts:g}),className:"cta",style:{fontSize:"1.1rem",borderRadius:14,fontWeight:700,boxShadow:"0 2px 8px rgba(247,198,191,0.18)",padding:"1rem 2.2rem",letterSpacing:"0.01em",border:"none",outline:"none",margin:0,cursor:"pointer",transition:"background 0.15s"},children:"Begin Your Journey"})})]})})})}const y=new A("kindred_echo_db");y.version(1).stores({notes:"id, createdAt"});function D({flow:a}){const[r,p]=i.useState([]),[o,t]=i.useState(""),[s,d]=i.useState("");i.useEffect(()=>{g()},[]);async function g(){const n=await y.notes.toArray();p(n.reverse())}async function j(){o.trim()&&(await y.notes.add({id:crypto.randomUUID(),text:o,tags:s?[s]:[],createdAt:new Date().toISOString()}),t(""),d(""),g())}async function h(){const{jsPDF:n}=await w(async()=>{const{jsPDF:l}=await import("./vendor-pdf-3WSohUOQ.js").then(m=>m.j);return{jsPDF:l}},__vite__mapDeps([0,1])),c=new n;r.forEach((l,m)=>{const x=l.tags&&l.tags.length?l.tags.join(", "):"general";c.text(`${S(l.createdAt).format("MMM D, YYYY HH:mm")} - ${x}`,10,20+m*10),c.text(l.text,10,30+m*10)}),c.save("KindredEcho_Notes.pdf")}const[C,b]=i.useState(!1),[f,u]=i.useState(null),[k,v]=i.useState(null);async function E(n){v(n),b(!0),u(null);try{const c="https://kindred-echo-latest-lywx2ee7n-gerry-perezs-projects.vercel.app",l=c?`${c.replace(/\/$/,"")}/api/echo`:"/api/echo",x=await(await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n.text})})).json();x?.reflection?u(x.reflection):u(x?.error||"No reflection returned")}catch(c){u(`Error: ${c?.message||String(c)}`)}finally{b(!1)}}function R(){f&&(y.notes.add({id:crypto.randomUUID(),text:`Echo reflection: ${f}`,tags:["echo"],createdAt:new Date().toISOString()}),u(null),g())}return e.jsx("div",{className:"device-center",children:e.jsxs("div",{className:"device",children:[e.jsxs("div",{className:"journal-hero",children:[e.jsx("h2",{children:"Daily Reflections"}),e.jsx("div",{className:"muted",children:a==="echo"?"A short reflective prompt to yourself":a==="circles"?"Prompts for sharing with your circle":"Your space to reflect and connect"})]}),e.jsxs("div",{className:"journal-card",children:[e.jsx("textarea",{value:o,onChange:n=>t(n.target.value),placeholder:"Write your reflection here...",className:"input",rows:4}),e.jsx("input",{value:s,onChange:n=>d(n.target.value),placeholder:"Tag (emotion, thought, event)",className:"input"}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:12},children:[e.jsx("button",{onClick:j,className:"cta",children:"Begin Your Journey"}),e.jsx("button",{onClick:h,style:{padding:".5rem .75rem",borderRadius:10},children:"Export"})]})]}),e.jsx("ul",{style:{marginTop:18,listStyle:"none",padding:0},children:r.map(n=>e.jsxs("li",{style:{marginBottom:12},children:[e.jsxs("div",{style:{fontSize:12,color:"#6b7280",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:S(n.createdAt).format("MMM D, HH:mm")}),e.jsx("button",{onClick:()=>E(n),style:{fontSize:12,background:"transparent",border:"none",color:"#7d93f6",cursor:"pointer"},children:"Reflect with Echo"})]}),e.jsx("div",{style:{background:"white",borderRadius:12,padding:12,boxShadow:"0 4px 10px rgba(16,24,40,0.04)",marginTop:6},children:n.text}),n.tags&&n.tags.length>0&&e.jsx("div",{style:{marginTop:6},children:e.jsxs("span",{className:"tag-pill",children:["#",n.tags[0]]})})]},n.id))}),k&&e.jsxs("div",{style:{position:"fixed",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx("div",{style:{background:"rgba(0,0,0,0.35)",position:"absolute",inset:0},onClick:()=>{v(null),u(null)}}),e.jsxs("div",{style:{zIndex:50,background:"white",padding:18,borderRadius:12,maxWidth:560,width:"94%",boxShadow:"0 12px 40px rgba(16,24,40,0.12)"},children:[e.jsx("h3",{style:{marginTop:0},children:"Echo's Reflection"}),e.jsx("div",{style:{minHeight:60},children:C?e.jsx("div",{children:"Thinking…"}):e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:f})}),e.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:12},children:[e.jsx("button",{onClick:()=>{v(null),u(null)},className:"secondary",children:"Close"}),e.jsx("button",{onClick:R,className:"cta",disabled:!f,children:"Save Reflection"})]})]})]})]})})}function z({onBack:a}){return e.jsx("main",{className:"circles-wrap",children:e.jsxs("div",{className:"circles-card",children:[e.jsx("div",{className:"circles-badge",children:"Coming Soon"}),e.jsxs("div",{children:[e.jsx(T,{className:"circles-hero-icon"}),e.jsx("h1",{className:"circles-title",children:"Connection Circles"}),e.jsx("p",{className:"circles-desc",children:"This space will soon allow you to share reflections, find empathy, and connect with others through shared experiences."}),e.jsxs(N.div,{className:"circles-quote",initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx(I,{className:"circles-quote-icon"}),e.jsx("p",{className:"circles-quote-text",children:"“In the future, Circles will bring Kindred Echo’s heart to life — turning reflection into connection.”"})]}),e.jsx(N.button,{className:"circles-cta",whileHover:{scale:1.01},whileTap:{scale:.98},onClick:a,"aria-label":"Back to Feeling Page",children:"← Back to Feeling Page"})]})]})})}const F=i.lazy(()=>w(()=>import("./FeelingPage-BNt5yKAT.js"),__vite__mapDeps([2,3,1,4])));function H(){const[a,r]=i.useState("onboard"),[p,o]=i.useState(null);return a==="onboard"?e.jsx(O,{onStart:()=>r("select")}):a==="select"?e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"device-center",children:e.jsx("div",{className:"device journal-card",children:"Loading…"})}),children:e.jsx(F,{onSelect:t=>{t==="echo"?(r("journal"),o("echo")):(r("circles"),o("circles"))}})}):a==="journal"?e.jsx(D,{flow:p??void 0}):a==="circles"?e.jsx(z,{onBack:()=>r("select")}):null}_.createRoot(document.getElementById("root")).render(e.jsx(P.StrictMode,{children:e.jsx(H,{})}));
